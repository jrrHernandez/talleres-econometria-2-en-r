print(resultadosIv)
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
print(resultadosIv)
install.packages("tinytex")
install.packages("tinytex")
install.packages("tinytex")
require(pacman)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modelo1 <- lm(lwage ~ educ  + exper + black + married + fatheduc + motheduc, data=base1df)
modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
print(resultadosIv)
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modelo1 <- lm(lwage ~ educ  + exper + black + married + fatheduc + motheduc, data=base1df)
modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
```{r results="asis", echo=FALSE}
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
print(resultadosIv)
setwd("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/resultados")
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
print(resultadosIv)
is_tinytex()
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modelo1 <- lm(lwage ~ educ  + exper + black + married + fatheduc + motheduc, data=base1df)
modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
```{r results="asis", echo=FALSE}
setwd("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/resultados")
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
print(resultadosIv)
tinytex::pdflatex("RegresionIvP1e.tex")
setwd("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/resultados")
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
print(resultadosIv)
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modelo1 <- lm(lwage ~ educ  + exper + black + married + fatheduc + motheduc, data=base1df)
modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
```{r results="asis", echo=FALSE}
setwd("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/resultados")
resultadosIv <- stargazer(modelo1,modelo2, type="latex")
print(resultadosIv)
resultadosIv <- stargazer(modelo1,modelo2, type="latex", escape=FALSE)
resultadosIv <- stargazer(modelo1,modelo2, type="latex", escape=FALSE, header=FALSE)
rmarkdown::render("resultadosIv.Rmd",output_format = "pdf_document")
modelo1eraetapa <- lm(educ ~ nearc4 +  exper + black + married + fatheduc + motheduc, data= base1df)
resultados1eraetapa <- stargazer(modelo1eraetapa, type="latex", escape= FALSE, header= FALSE)
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
```{r results="asis", echo=FALSE}
resultados1eraetapa<-stargazer(modelo1eraetapa, type="latex", escape= FALSE, header= FALSE)
resultados1eraetapa<-stargazer(modelo1eraetapa, type="latex", escape= FALSE, header= FALSE)
modelo1eraetapa <- lm(educ ~ nearc4 +  exper + black + married + fatheduc + motheduc, data= base1df)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, dplyr, knitr, rio, AER, tinytex)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modelo1eraetapa <- lm(educ ~ nearc4 +  exper + black + married + fatheduc + motheduc, data= base1df)
```{r results="asis", echo=FALSE}
resultados1eraetapa<-stargazer(modelo1eraetapa, type="latex", escape= FALSE, header= FALSE)
resultados1eraetapa <- stargazer(modelo1eraetapa, type="text", escape= FALSE, header= FALSE)
print(resultados1eraetapa)
resultados1eraetapa <- stargazer(modelo1eraetapa, type="text", escape= FALSE, header= FALSE)
resultados1eraetapa <- stargazer(modelo1eraetapa, type="text", escape= FALSE, header= FALSE)
#interpretacion
# ===============================================
#Dependent variable:
---------------------------
#                              educ
-----------------------------------------------
#  nearc4                       0.316***
#                             (0.086)
#exper                        -0.341***
#                             (0.011)
#black                        -0.332***
#                              (0.116)
#married                      0.286***
#                             (0.091)
#fatheduc                     0.116***
#                             (0.014)
#motheduc                     0.133***
#                             (0.017)
#Constant                     13.506***
#                             (0.228)
-----------------------------------------------
#  Observations                   2,220
#R2                             0.482
#Adjusted R2                    0.481
#Residual Std. Error      1.864 (df = 2213)
#F Statistic          343.619*** (df = 6; 2213)
#===============================================
#  Note:               *p<0.1; **p<0.05; ***p<0.01
#### g)#####
#modelo en forma reducida: Yi = alpha + b1Zi+gammaXi+ei, donde Zi es el instrumento nearc4
formareducida <- lm(lwage ~ nearc4 + exper + black + married + fatheduc + motheduc, data= base1df)
resultados1eraetapa <- stargazer(modelo1eraetapa, type="text", escape= FALSE, header= FALSE)
formareducida <- lm(lwage ~ nearc4 + exper + black + married + fatheduc + motheduc, data= base1df)
require(pacman)
p_load(stargazer, rio)
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, rio)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
require(pacman)
p_load(stargazer, rio)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
```{r results="asis",echo=FALSE}
formareducida <- lm(lwage ~ nearc4 + exper + black + married + fatheduc + motheduc, data= base1df)
resultadosfr <- stargazer(formareducida, data= base1df, header=FALSE, escape=FALSE, type="latex")
formareducida <- lm(lwage ~ nearc4 + exper + black + married + fatheduc + motheduc, data= base1df)
resultadosfr <- stargazer(formareducida, data= base1df, header=FALSE, escape=FALSE, type="latex")
0.104/0.316
0.104/0.316 == 0.3291139
0.104/0.316
#obtenemos la recta que mejor se ajusta a los puntos
sihat <- modelo1eraetapa$fitted.values
sihat
#segunda etapa
modelo2etapa <- lm(lwage ~ sihat + exper + black + married + fatheduc + motheduc, data= base1df)
resultados2etapa <- stargazer(modelo2etapa, type = "latex", escape= FALSE, header=FALSE)
modeloiv <-modelo2
#unimos la regresion de 1era etapa con la de 2nda etapa y con ivreg
p_load(rio, AER, dplyr)
modeloiv <-modelo2
uniondereg <- stargazer(modelo1eraetapa,modelo2etapa, modeloiv, type="latex", header = FALSE, escape = FALSE)
require(pacman)
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(rio, AER, dplyr)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modeloiv <-modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
sihat <- modelo1eraetapa$fitted.values
modelo2etapa <- lm(lwage ~ sihat + exper + black + married + fatheduc + motheduc, data= base1df)
resultados2etapa <- stargazer(modelo2etapa, type = "latex", escape= FALSE, header=FALSE)
uniondereg <- stargazer(modelo1eraetapa,modelo2etapa, modeloiv, type="latex", header = FALSE, escape = FALSE)
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(rio, AER, dplyr)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modeloiv <-modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
```{r results="asis", echo=FALSE}
modelo1eraetapa <- lm(educ ~ nearc4 +  exper + black + married + fatheduc + motheduc, data= base1df)
sihat <- modelo1eraetapa$fitted.values
modelo2etapa <- lm(lwage ~ sihat + exper + black + married + fatheduc + motheduc, data= base1df)
resultados2etapa <- stargazer(modelo2etapa, type = "latex", escape= FALSE, header=FALSE)
uniondereg <- stargazer(modelo1eraetapa,modelo2etapa, modeloiv, type="latex", header = FALSE, escape = FALSE)
require(pacman)
p_load(rio, AER, dplyr, stargazer)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modeloiv <-modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(rio, AER, dplyr, stargazer)
base1 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP1.dta")
base1df <- as.data.frame(base1)
modeloiv <-modelo2 <- ivreg(lwage ~ educ  + exper + black + married + fatheduc + motheduc| nearc4 + exper + black + married + fatheduc + motheduc, data = base1df)
```{r results="asis", echo=FALSE}
modelo1eraetapa <- lm(educ ~ nearc4 +  exper + black + married + fatheduc + motheduc, data= base1df)
sihat <- modelo1eraetapa$fitted.values
modelo2etapa <- lm(lwage ~ sihat + exper + black + married + fatheduc + motheduc, data= base1df)
resultados2etapa <- stargazer(modelo2etapa, type = "latex", escape= FALSE, header=FALSE)
uniondereg <- stargazer(modelo1eraetapa,modelo2etapa, modeloiv, type="latex", header = FALSE, escape = FALSE)
#unimos la regresion de 1era etapa con la de 2nda etapa y con ivreg
p_load(rio, AER, dplyr, rmarkdown)
modeloiv <-modelo2
wd()
wd
workdirectory
setwd()
#Limpiamos el inventario
rm(list=ls())
p_load(stargazer, rio)
require(pacman)
p_load(stargazer, rio)
base2 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP2.dta")
View(base2)
names(base2)
max(base2$vote_share)
modelo1 <- lm(parvio_ip4_pc~leftwinner, data = base2)
modelo1 <- lm(parvio_ip4_pc~lef_twinner, data = base2)
modelo1 <- lm(parvio_ip4_pc~left_winner, data = base2)
resultados <- stargazer(modelo1, type = "latex", header = FALSE, escape = FALSE)
modelo1 <- lm(parvio_ip4_pc~left_winner, data = base2)
modelo1 <- lm(parvio_ip4_pc~left_winner, data = base2)
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(pacman)
p_load(stargazer, rio)
base2 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP2.dta")
modelo1 <- lm(parvio_ip4_pc~left_winner, data = base2)
modelo1 <- lm(parvio_ip4_pc~left_winner, data = base2)
```{r results="asis", echo=FALSE}
resultados <- stargazer(modelo1, type = "latex", header = FALSE, escape = FALSE)
resultados <- stargazer(modelo1, type = "text", header = FALSE, escape = FALSE)
require(pacman)
p_load(stargazer, rio)
####### a)############
base2 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP2.dta")
modelo1 <- lm(parvio_ip4_pc~left_winner, data = base2)
resultados <- stargazer(modelo1, type = "text", header = FALSE, escape = FALSE)
p_load(stargazer, rio, ggplot2)
resultados <- stargazer(modelo1, type = "text", header = FALSE, escape = FALSE)
ggplot(data = base2, mapping = aes(x=base2$vote_share, y = base2$left_winner)) +
geom_line() + geom_vline(xintercept = 0, linetype = "dashed", color = "red", size = 1) +
labs(title = "Probabilidad de recibir tratamiento dado que D=1",
x = "Variable explicativa (X)",
y = "Probabilidad estimada de recibir tratamiento")
resultados <- stargazer(modelo1, type = "text", header = FALSE, escape = FALSE)
ggplot(data = base2, mapping = aes(x=base2$vote_share, y = base2$left_winner)) +
geom_line() + geom_vline(xintercept = 0, linetype = "dashed", color = "red", size = 1) +
labs(title = "Probabilidad de recibir tratamiento dado que D=1",
x = "proporción de votos",
y = "Probabilidad de ser alcalde de izquierda")
##########c)##########
## 1) graficar relacion existente entre vote_share y parvio_ip4_pc
ggplot(data = base2, mapping = aes(x=base2$vote_share, y=base2$parvio_ip4_pc))+
geom_point()
#2) correr regresion
p_load(rdd, aes)
require(rdd, aes, graphics)
X<-seq(-1,1,.01)
triang.wts<-kernelwts(X,0,1,kernel="triangular")
plot(X,triang.wts,type="l")
cos.wts<-kernelwts(X,0,1,kernel="cosine")
plot(X,cos.wts,type="l")
modeloRDD <- RDestimate(parvio_ip4_pc~vote_share, data=base2)
View(modeloRDD)
summary(modeloRDD)
print.RD
print(modeloRDD)
plot(modeloRDD)
stargazer(modeloRDD, type="text")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+ geom_point(alpha=0.5)+
geom_smooth(data = subset(base2, x < 0), aes(x, y), method = "lm", color = "blue", se = FALSE)
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+ geom_point(alpha=0.5)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE)
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE)
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4), method = "lm", color="red")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE)
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
labs(title= "Regresion Discontinua Aguda sin no linealidad"
)
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)
labs(title= "Regresion Discontinua Aguda sin no linealidad",
xlab="proporcion de votos de la izquiera"
ylab= "indice de violencia por paramilitares")
labs(title= "Regresion Discontinua Aguda sin no linealidad",
xlab="proporcion de votos de la izquiera",
ylab= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)
labs(title= "Regresion Discontinua Aguda sin no linealidad",
xlab="proporcion de votos de la izquiera",
ylab= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
xlab="proporcion de votos de la izquiera",
ylab= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_point()
ggplot(mapping = aes(x=vote_share, y=parvio_ip4), data=base2)+
geom_point()
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_point()
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_point()+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_point(alpha=0.5)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
# regresion RDD con no linealidad
modeloRDDnl <- RDestimate(parvio_ip4_pc ~ vote_share + (vote_share)^2, data=base2)
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method=modeloRDDnl, data = subset(base2, vote_share<0), se=FALSE)
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method=modeloRDDnl, data = subset(base2, vote_share<0), se=FALSE)
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method="lm", data = subset(base2, vote_share<0), se=FALSE)
library(rdd)
library(ggplot2)
rdd_object <- rdd_data(y = base2$parvio_ip4_pc, x = base2$vote_share, cutpoint = 0)
help(package= "rdd")
help(package= "rdd")
require(rdd)
# Install required packages (if not already installed)
install.packages("rddtools", dependencies = TRUE)
install.packages("ggplot2", dependencies = TRUE)
install.packages("ggplot2", dependencies = TRUE)
install.packages("rdrobust", dependencies = TRUE)
library(rddtools)
library(ggplot2)
library(rdrobust)
n <- 500
x <- runif(n, -1, 1)  # Forcing variable
treatment <- ifelse(x >= 0, 1, 0)
y <- 2 + 3*x + 5*x^2 + treatment * 2 + rnorm(n, 0, 1)
rdd_data_obj <- rdd_data(y = y, x = x, cutpoint = 0)
View(rdd_data_obj)
rdd_model <- rdd_reg_lm(rdd_data_obj, order = 2)
View(rdd_model)
stargazer::stargazer(rdd_model, type="text")
#2) correr regresionRDD y=b0 + b1voteshare+e (sin no linealidad)
p_load(rdd, aes, rddtools)
#2) correr regresionRDD y=b0 + b1voteshare+e (sin no linealidad)
p_load(rdd, AER, rddtools)
objetoRDD <- rdd_data_obj(y= parvio_ip4_pc, x= vote_share, data=base2)
#2) correr regresionRDD y=b0 + b1voteshare+e (sin no linealidad)
p_load(rdd, AER, rddtools)
objetoRDD <- rdd_data_obj(y= parvio_ip4_pc, x= vote_share, data=base2)
objetoRDD <- rdd_data_obj(y= parvio_ip4_pc, x= vote_share, data=base2)
datosRDD<-rdd_data(y= parvio_ip4_pc, x= vote_share, data=base2)
rm(list=ls)
rm(list=ls())
require(pacman)
#2) correr regresionRDD y=b0 + b1voteshare+e (sin no linealidad)
p_load(rdd, AER, rddtools)
datosRDD<-rdd_data(y= parvio_ip4_pc, x= vote_share, data=base2)
help(package= "rddtools")
#estimamos la regresion y graficamos
modeloRDD <- rdd_reg_lm(datosRDD,)
require(pacman)
p_load(stargazer, rio, ggplot2)
####### a)############
base2 <- import("C:/Users/richa/OneDrive - Universidad de los Andes/Universidad/octavo/Econometria 2/taller 2/taller2 practico/New folder/talleres-econometria-2-en-r/bases/BaseP2.dta")
##########c)##########
## 1) graficar relacion existente entre vote_share y parvio_ip4_pc
ggplot(data = base2, mapping = aes(x=base2$vote_share, y=base2$parvio_ip4_pc))+
geom_point()
##########c)##########
## 1) graficar relacion existente entre vote_share y parvio_ip4_pc
ggplot(data = base2, mapping = aes(x=base2$vote_share, y=base2$parvio_ip4_pc))+
geom_point() + labs(x="proporcion de votos", y= "indice de violencia por paramilitares")
#2) correr regresionRDD y=b0 + b1voteshare+e (sin no linealidad)
p_load(rdd, AER, rddtools) ## paquetes rdd y rddtools nos permite hacer un rd y es compatible con stargazer
datosRDD<-rdd_data(y= parvio_ip4_pc, x= vote_share, data=base2, cutpoint = 0)
#estimamos la regresion y graficamos
modeloRDD <- rdd_reg_lm(datosRDD)
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess"m data=subset(base2, vote_share >0), se= FALSE)
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+ geom_point(alpha=0.5)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)
# regresion RDD con no linealidad
modeloRDDnl <- rdd_reg_lm(datosRDD, order=2)
#graficp de dispercion sin puntos
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)
#graficp de dispercion sin puntos
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)+
labs(title= "regresion discontinua con no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
##grafico de dispersion con puntos y RDD
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+ geom_point(alpha=0.5)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)
#graficp de dispercion sin puntos
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)+
labs(title= "regresion discontinua con no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
##grafico de dispersion con puntos y RDD
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+ geom_point(alpha=0.5)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)+
labs(title= "regresion discontinua con no linealidad y sin puntos",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
##grafico de dispersion con puntos y RDD
ggplot(mapping= aes(x= vote_share,y=parvio_ip4_pc), data= base2)+ geom_point(alpha=0.5)+
geom_smooth(method="loess", data = subset(base2, vote_share<0), se=FALSE)+
geom_smooth(method="loess", data=subset(base2, vote_share >0), se= FALSE)+
labs(title= "regresion discontinua con no linealidad y con puntos",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
###################
#prueba con valores ajustados
dataajustada <- data.frame(x= modeloRDD$fitted.values, y=modeloRDD$fitted.values)
View(dataajustada)
###################
#prueba con valores ajustados
dataajustada <- data.frame(x= modeloRDD$fitted.values, y=predict(modeloRDD))
view(dataajustada)
dataajustada <- data.frame(x= modeloRDD$fitted.values, y=predict(modeloRDD))
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_line(data= dataajustada, x=dataajustada$x, y= dataajustada$y)
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_line(data= dataajustada, aes(x=dataajustada$x, y= dataajustada$y) )+
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_line(data= dataajustada, aes(x=dataajustada$x, y= dataajustada$y) )+
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")+ theme_minimal()
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_line(data= dataajustada, aes(x=dataajustada$x, y= dataajustada$y) )
ggplot(mapping = aes(x=vote_share, y=parvio_ip4_pc), data=base2)+
geom_smooth(data = subset(base2, vote_share < 0), aes(vote_share, parvio_ip4_pc), method = "lm", color = "blue", se = FALSE) +
geom_smooth(data= subset(base2, vote_share>0), mapping = aes(x=vote_share, y=parvio_ip4_pc), method = "lm", color="red", se= FALSE) +
geom_vline(xintercept = 0, linetype = "dashed", color = "green", size = 1)+
labs(title= "Regresion Discontinua Aguda sin no linealidad",
x="proporcion de votos de la izquiera",
y= "indice de violencia por paramilitares")
